<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="../style/components.css">
    <title>habitTools</title>
</head>
<body>
<div id="app">
    <el-container>
        <el-aside width="200px">
            <el-header id="habitica_title">
                <el-row>
                    <el-col :span=8 id="user_avatar">
                        <el-avatar :src="userAvatarImg"></el-avatar>
                    </el-col>
                    <el-col :span=16 id="user_name">
                        <el-link @click="openHabitica" target="_blank" >{{userName | ellipsis}}</el-link>
                    </el-col>
                </el-row>
            </el-header>
            <el-menu default-active="1">
                <el-menu-item index="1">
                    <i class="el-icon-time"></i>
                    <span slot="title">习惯</span>
                </el-menu-item>
                <el-menu-item index="2">
                    <i class="el-icon-sunrise-1"></i>
                    <span slot="title">每日任务</span>
                </el-menu-item>
                <el-menu-item index="3">
                    <i class="el-icon-notebook-2"></i>
                    <span slot="title">待办事项</span>
                </el-menu-item>
            </el-menu>
        </el-aside>

        <el-container id="content">
            <el-header>
                <el-row :gutter="28" type="flex" align="middle">
                    <el-col :span="8">
                        <el-progress :text-inside="true" :stroke-width="23" :percentage="HP/50*100" :title="HP" status="exception" :format="formatHP"></el-progress>
                    </el-col>
                    <el-col :span="8">
                        <el-progress :text-inside="true" :stroke-width="23" :percentage="EXP/maxEXP*100" :title="EXP" status="warning" :format="formatEXP"></el-progress>
                    </el-col>
                    <el-col :span="8">
                        <el-progress :text-inside="true" :stroke-width="23" :percentage="MP/maxMP*100"  :title="MP" :format="formatMP"></el-progress>
                    </el-col>
                </el-row>
            </el-header>
            <el-main>
                <div id="task_list">

                </div>
            </el-main>
            <el-footer><el-input placeholder="键入回车新建" @keyup.enter.native="create" v-model="createInput"></el-input></el-footer>
        </el-container>
    </el-container>
</div>
</body>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/element-ui@2.13.2/lib/index.js"></script>
<script>
    new Vue({
        el: '#app',
        data: {
            userAvatarImg: "https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",
            userName: "鹿友",
            HP: 40,
            EXP: 1074,
            maxEXP: 1200,
            MP: 418,
            maxMP: 430,
            menuVal: 1,
            createInput: '123'
        },
        methods: {
            openHabitica() {
                utools.shellOpenExternal('https://habitica.com/');
            },
            //格式化进度条，显示具体数值
            formatHP(percentage) {return this.HP;},
            formatEXP(percentage) {return this.EXP;},
            formatMP(percentage) {return this.MP;},
            create() {
                alert("创建："+this.menuVal)
            }
        },
        filters: {
            ellipsis: function(value) {
                if (!value) return '';
                if (value.length < 8) return value;
                //长度超长的根据名字判断，纯汉字最大7位，纯英文数字最大14位
                if (/^[A-Za-z0-9]+$/.test(value)) {
                    return value.slice(0, 12) + '...';
                } else {
                    return value.slice(0, 6) + '...';
                }
            }
        }
    });
</script>
</html>